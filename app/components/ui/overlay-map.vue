<template>
  <div ref="root" class="overlay">
    <div ref="wrapper" class="overlay__wrapper">
      <div ref="layer" class="overlay__layer" :style="layerStyle">
        <UiPicture src="genplan.jpg" alt="overlay banner" class="overlay__picture" />
        <svg
          class="overlay__container"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 1440 812"
          preserveAspectRatio="xMidYMid slice"
        >
          <path
            v-for="(path, index) in paths"
            :key="index"
            :d="path"
            class="overlay__container-path"
          />
        </svg>
      </div>
    </div>
  </div>
</template>

<script setup>
import gsap from 'gsap';

const paths = [
  'M 522.995 437.999 L 653.997 395.999 L 679.997 427.499 L 680.497 436.999 L 547.997 482.499 L 547.997 473.999 L 522.995 437.999 Z',
  'M 964.997 295.498 L 1074 260.998 L 1106 288.158 L 1106 296.998 L 996 332.998 L 996 324.998 L 964.997 295.498 Z',
  'M 1029.5 361.498 L 1086 341.998 L 1103.5 358.498 L 1103 365.498 L 1046.5 384.998 L 1029 368.998 L 1029.5 361.498 Z',
  'M 1096.5 338.498 L 1152 319.498 L 1170.5 335.498 L 1170 342.498 L 1114.5 361.998 L 1096 345.998 L 1096.5 338.498 Z',
  'M 1058.52 388.498 L 1116.91 368.998 L 1135 385.498 L 1134.48 392.498 L 1076.09 411.999 L 1058 395.999 L 1058.52 388.498 Z',
  'M 1126.5 364.778 L 1182.98 345.998 L 1201 361.808 L 1200.5 368.728 L 1145 388.498 L 1126 372.188 L 1126.5 364.778 Z',
  'M 1085 413.499 L 1143.91 392.999 L 1162 409.499 L 1162 417.499 L 1104 438.499 L 1085 421.499 L 1085 413.499 Z',
  'M 1154 389.278 L 1210 368.998 L 1230 385.318 L 1229 392.498 L 1172.75 413.999 L 1154 397.186 L 1154 389.278 Z',
  'M 1112.5 438.499 L 1171.91 417.999 L 1191 435.499 L 1191 442.499 L 1132 464.999 L 1112.5 446.499 L 1112.5 438.499 Z',
  'M 1182.5 413.499 L 1239.41 392.999 L 1259.5 409.999 L 1258.5 417.499 L 1201.5 438.499 L 1182 420.999 L 1182.5 413.499 Z',
  'M 1142 465.371 L 1202.55 443.999 L 1222 461.999 L 1221 469.499 L 1161.5 492.499 L 1142 473.712 L 1142 465.371 Z',
  'M 1212.5 439.499 L 1269.55 417.999 L 1290.5 435.499 L 1289 443.499 L 1232 465.499 L 1211 446.999 L 1212.5 439.499 Z',
  'M 283.995 515.499 L 490.495 448.999 L 514.495 483.999 L 514.995 493.499 L 304.495 564.499 L 304.495 555.999 L 283.995 515.499 Z',
  'M 317.995 601.499 L 426.495 564.999 L 438.995 586.999 L 440.995 593.999 L 332.495 630.999 L 328.995 623.999 L 317.995 601.499 Z',
  'M 334.995 633.999 L 445.495 594.999 L 479.495 653.499 L 479.995 661.499 L 366.995 681.999 L 355.995 679.499 L 334.995 633.999 Z',
  'M 441.995 559.999 L 545.497 523.999 L 559.497 544.999 L 559.997 551.999 L 455.495 588.999 L 454.995 579.999 L 441.995 559.999 Z',
  'M 460.495 590.499 L 565.497 553.499 L 579.997 574.499 L 579.997 581.999 L 474.495 618.999 L 473.995 611.999 L 460.495 590.499 Z',
  'M 479.995 622.499 L 585.997 583.999 L 608.997 617.999 L 608.997 625.999 L 544.497 648.999 L 496.995 657.499 L 495.995 648.999 L 479.995 622.499 Z',
  'M 759.497 362.498 L 930.497 306.998 L 961.497 336.498 L 961.497 345.998 L 788.497 401.999 L 788.497 393.499 L 759.497 362.498 Z',
  'M 257.995 464.499 L 459.495 401.999 L 482.495 435.499 L 482.995 441.499 L 278.495 508.499 L 277.995 500.999 L 257.995 464.499 Z',
  'M 722.997 320.998 L 889.997 268.998 L 918.997 295.998 L 918.997 303.498 L 749.497 361.498 L 749.497 351.498 L 722.997 320.998 Z',
  'M 233.495 417.499 L 430.495 357.998 L 451.995 389.498 L 452.495 395.999 L 252.995 459.499 L 252.495 451.499 L 233.495 417.499 Z',
  'M 687.497 281.498 L 851.497 231.998 L 878.997 258.498 L 878.997 264.498 L 712.997 317.498 L 713.497 309.998 L 687.497 281.498 Z',
  'M 490.995 392.999 L 618.997 351.998 L 644.997 383.498 L 644.497 393.499 L 512.995 436.499 L 512.995 427.499 L 490.995 392.999 Z',
  'M 924.497 257.498 L 1031 223.998 L 1062 250.498 L 1062 256.998 L 954.497 294.498 L 954.497 285.498 L 924.497 257.498 Z',
  'M 459.995 349.998 L 585.997 310.998 L 609.997 341.498 L 610.997 347.998 L 481.995 389.498 L 483.495 381.498 L 459.995 349.998 Z',
  'M 884.997 221.998 L 989.997 190.498 L 1019.5 214.998 L 1019 220.998 L 913.497 254.998 L 913.997 247.998 L 884.997 221.998 Z',
  'M 857.997 500.499 L 958.997 462.499 L 1045 552.499 L 931.997 583.499 L 857.997 500.499 Z',
  'M 940.997 400.168 L 1005 377.998 L 1025.5 397.499 L 1028.5 396.499 L 1037 403.999 L 1037 407.999 L 1053.5 423.999 L 985.497 449.499 L 940.997 400.168 Z',
  'M 860.497 428.499 L 931.497 403.999 L 978.497 450.499 L 905.997 475.999 L 860.497 428.499 Z',
  'M 809.997 445.999 L 859.997 428.999 L 905.497 476.499 L 851.997 493.999 L 809.997 445.999 Z',
  'M 668.997 488.499 L 675.497 486.499 L 675.997 481.499 L 716.997 467.999 L 764.997 528.499 L 714.497 547.999 L 668.997 488.499 Z',
  'M 584.997 511.999 L 634.497 493.999 L 675.997 550.499 L 623.497 569.499 L 584.997 511.999 Z',
  'M 626.997 573.499 L 691.997 549.499 L 710.497 572.999 L 644.997 598.499 L 626.997 573.499 Z',
  'M 714.997 550.999 L 764.997 531.499 L 819.997 600.999 L 765.497 620.999 L 714.997 550.999 Z',
  'M 671.497 588.999 L 713.997 571.999 L 726.997 589.499 L 727.497 599.499 L 746.497 624.999 L 680.997 648.999 L 652.997 610.999 L 661.997 607.499 L 661.997 605.999 L 671.497 602.499 L 671.497 588.999 Z',
  'M 965.497 461.499 L 1041 431.499 L 1081.5 462.999 L 1045.5 474.999 L 1042 471.499 L 1027.5 476.999 L 1027 482.999 L 998 493.499 L 965.497 461.499 Z',
  'M 1001 498.499 L 1026.5 488.499 L 1028 477.499 L 1042 471.999 L 1050 479.499 L 1081 468.499 L 1119.5 505.499 L 1037 536.499 L 1001 498.499 Z',
  'M 555.997 372.498 L 539.495 377.998 L 551.997 394.999 L 568.997 389.498 L 555.997 372.498 Z',
  'M 568.997 389.498 L 551.997 394.999 L 564.497 412.499 L 581.497 406.999 L 568.997 389.498 Z',
  'M 539.496 377.998 L 523.495 382.948 L 535.995 399.999 L 551.997 394.999 L 539.496 377.998 Z',
  'M 551.997 394.999 L 535.995 399.999 L 548.497 417.499 L 564.497 412.499 L 551.997 394.999 Z',
  'M 523.496 382.998 L 506.995 387.998 L 519.995 404.999 L 535.996 399.999 L 523.496 382.998 Z',
  'M 535.994 399.999 L 519.995 404.999 L 532.995 422.499 L 548.497 417.499 L 535.994 399.999 Z',
  'M 506.995 387.998 L 491.495 392.664 L 503.995 409.999 L 519.995 404.999 L 506.995 387.998 Z',
  'M 519.995 404.999 L 503.995 409.999 L 516.495 427.548 L 532.995 422.499 L 519.995 404.999 Z',
  'M 523.285 330.078 L 506.839 335.468 L 519.298 352.118 L 536.242 346.728 L 523.285 330.078 Z',
  'M 536.24 346.728 L 519.296 352.118 L 531.755 369.258 L 548.697 363.868 L 536.24 346.728 Z',
  'M 506.838 335.468 L 490.89 340.308 L 503.349 357.008 L 519.297 352.118 L 506.838 335.468 Z',
  'M 519.294 352.118 L 503.347 357.018 L 515.806 374.158 L 531.754 369.258 L 519.294 352.118 Z',
  'M 490.891 340.368 L 474.444 345.258 L 487.402 361.908 L 503.35 357.018 L 490.891 340.368 Z',
  'M 503.348 357.008 L 487.401 361.908 L 500.359 379.048 L 515.808 374.158 L 503.348 357.008 Z',
  'M 474.444 345.258 L 458.995 349.828 L 471.454 366.808 L 487.402 361.908 L 474.444 345.258 Z',
  'M 487.403 361.908 L 471.456 366.808 L 483.915 383.998 L 500.361 379.058 L 487.403 361.908 Z',
  'M 619.347 351.998 L 603.397 357.498 L 615.477 374.478 L 631.917 368.988 L 619.347 351.998 Z',
  'M 631.917 368.988 L 615.477 374.478 L 627.557 391.958 L 643.997 386.468 L 631.917 368.988 Z',
  'M 603.397 357.498 L 587.927 362.438 L 600.007 379.478 L 615.477 374.478 L 603.397 357.498 Z',
  'M 615.477 374.478 L 600.017 379.478 L 612.097 396.96 L 627.567 391.968 L 615.477 374.478 Z',
  'M 587.927 362.488 L 571.977 367.488 L 584.547 384.468 L 600.017 379.478 L 587.927 362.488 Z',
  'M 600.007 379.478 L 584.547 384.468 L 597.117 401.956 L 612.097 396.96 L 600.007 379.478 Z',
  'M 571.977 367.488 L 556.997 372.148 L 569.077 389.468 L 584.547 384.468 L 571.977 367.488 Z',
  'M 584.547 384.468 L 569.077 389.468 L 581.167 406.998 L 597.117 401.954 L 584.547 384.468 Z',
  'M 588.817 417.622 L 571.727 423.155 L 584.677 440.256 L 602.287 434.724 L 588.817 417.622 Z',
  'M 602.287 434.722 L 584.677 440.254 L 597.627 457.859 L 615.237 452.326 L 602.287 434.722 Z',
  'M 571.727 423.153 L 555.147 428.132 L 568.107 445.285 L 584.677 440.255 L 571.727 423.153 Z',
  'M 584.677 440.257 L 568.097 445.287 L 581.047 462.891 L 597.627 457.861 L 584.677 440.257 Z',
  'M 555.147 428.185 L 538.054 433.214 L 551.517 450.316 L 568.097 445.286 L 555.147 428.185 Z',
  'M 568.097 445.284 L 551.517 450.314 L 564.987 467.918 L 581.047 462.889 L 568.097 445.284 Z',
  'M 538.054 433.214 L 521.995 437.907 L 534.946 455.345 L 551.527 450.315 L 538.054 433.214 Z',
  'M 551.527 450.315 L 534.948 455.345 L 547.897 472.999 L 564.997 467.92 L 551.527 450.315 Z',
  'M 654.457 396.999 L 637.937 402.527 L 650.447 419.613 L 667.477 414.085 L 654.457 396.999 Z',
  'M 667.477 414.085 L 650.457 419.613 L 662.967 437.202 L 679.997 431.674 L 667.477 414.085 Z',
  'M 637.927 402.524 L 621.907 407.499 L 634.427 424.636 L 650.447 419.611 L 637.927 402.524 Z',
  'M 650.457 419.614 L 634.427 424.64 L 646.947 442.229 L 662.977 437.203 L 650.457 419.614 Z',
  'M 621.907 407.554 L 605.387 412.579 L 618.397 429.665 L 634.427 424.64 L 621.907 407.554 Z',
  'M 634.427 424.64 L 618.397 429.665 L 631.417 447.254 L 646.947 442.229 L 634.427 424.64 Z',
  'M 605.387 412.577 L 588.997 417.499 L 602.377 434.689 L 618.397 429.664 L 605.387 412.577 Z',
  'M 618.407 429.663 L 602.377 434.688 L 614.897 452.326 L 631.427 447.252 L 618.407 429.663 Z',
  'M 586.427 309.998 L 570.527 315.378 L 582.577 332.018 L 598.957 326.638 L 586.427 309.998 Z',
  'M 598.957 326.638 L 582.577 332.018 L 594.617 349.148 L 610.997 343.758 L 598.957 326.638 Z',
  'M 570.527 315.378 L 555.107 320.218 L 567.157 336.908 L 582.567 332.018 L 570.527 315.378 Z',
  'M 582.567 332.018 L 567.157 336.918 L 579.197 354.038 L 594.617 349.148 L 582.567 332.018 Z',
  'M 555.117 320.278 L 539.218 325.168 L 551.747 341.808 L 567.157 336.908 L 555.117 320.278 Z',
  'M 567.157 336.908 L 551.737 341.808 L 564.267 358.928 L 579.197 354.038 L 567.157 336.908 Z',
  'M 539.218 325.168 L 524.284 329.728 L 536.328 346.698 L 551.747 341.808 L 539.218 325.168 Z',
  'M 551.737 341.808 L 536.323 346.698 L 548.367 363.868 L 564.267 358.928 L 551.737 341.808 Z',
  'M 430.495 358.498 L 414.495 363.498 L 425.495 378.998 L 440.995 373.998 L 430.495 358.498 Z',
  'M 414.495 363.498 L 399.995 367.998 L 410.495 383.998 L 425.495 378.998 L 414.495 363.498 Z',
  'M 399.995 367.998 L 384.995 372.498 L 395.495 388.498 L 410.495 383.998 L 399.995 367.998 Z',
  'M 384.995 372.498 L 370.495 376.998 L 380.495 392.999 L 395.495 388.498 L 384.995 372.498 Z',
  'M 368.768 377.498 L 352.495 382.998 L 362.495 398.499 L 379.014 393 L 368.768 377.498 Z',
  'M 302.447 397.999 L 284.994 403.499 L 294.495 418.999 L 311.949 413.999 L 302.447 397.999 Z',
  'M 352.495 382.998 L 336.495 387.998 L 345.995 403.499 L 362.495 398.499 L 352.495 382.998 Z',
  'M 284.92 403.498 L 267.997 408.499 L 277.43 424.497 L 294.43 418.997 L 284.92 403.498 Z',
  'M 336.496 387.998 L 319.995 392.999 L 329.495 408.499 L 345.996 403.499 L 336.496 387.998 Z',
  'M 267.995 408.5 L 251.423 413.527 L 260.569 429.612 L 277.497 424.5 L 267.995 408.5 Z',
  'M 319.984 392.999 L 303.815 397.758 L 312.995 413.499 L 329.484 408.499 L 319.984 392.999 Z',
  'M 251.497 413.5 L 234.323 417.903 L 243.997 435 L 260.497 429.5 L 251.497 413.5 Z',
  'M 425.495 378.998 L 410.495 383.998 L 420.995 399.499 L 435.995 394.999 L 425.495 378.998 Z',
  'M 410.495 383.998 L 395.495 388.498 L 405.995 403.999 L 420.995 399.499 L 410.495 383.998 Z',
  'M 395.495 388.498 L 380.495 392.999 L 390.995 408.999 L 405.995 403.999 L 395.495 388.498 Z',
  'M 378.995 392.999 L 362.495 398.499 L 372.495 414.999 L 389.995 409.499 L 378.995 392.999 Z',
  'M 311.996 413.999 L 294.497 418.999 L 304.497 436.999 L 322.498 431.499 L 311.996 413.999 Z',
  'M 362.495 398.499 L 345.995 403.499 L 355.995 419.999 L 372.495 414.999 L 362.495 398.499 Z',
  'M 294.516 419 L 277.498 424.499 L 287.214 442.59 L 304.516 437 L 294.516 419 Z',
  'M 345.995 403.499 L 329.495 408.499 L 339.995 424.999 L 355.995 419.999 L 345.995 403.499 Z',
  'M 277.501 424.5 L 260.497 429.499 L 269.997 446.999 L 286.811 441.846 L 277.501 424.5 Z',
  'M 329.495 408.499 L 312.995 413.499 L 322.995 430.499 L 339.995 424.999 L 329.495 408.499 Z',
  'M 260.543 429.501 L 243.998 435 L 252.497 451.5 L 269.997 447 L 260.543 429.501 Z',
  'M 440.995 373.998 L 425.495 378.998 L 435.995 394.999 L 451.495 389.998 L 440.995 373.998 Z',
  'M 850.457 232.498 L 837.997 236.498 L 851.467 249.998 L 864.997 245.498 L 850.457 232.498 Z',
  'M 838.007 236.498 L 825.497 239.998 L 838.997 253.498 L 851.507 249.998 L 838.007 236.498 Z',
  'M 825.487 239.998 L 813.497 243.498 L 826.967 257.498 L 838.987 253.498 L 825.487 239.998 Z',
  'M 813.527 243.498 L 800.997 247.498 L 814.497 260.998 L 826.997 257.498 L 813.527 243.498 Z',
  'M 801.147 247.278 L 786.497 251.998 L 799.537 265.498 L 814.617 261.278 L 801.147 247.278 Z',
  'M 786.497 251.998 L 772.497 256.998 L 785.967 269.998 L 799.497 265.498 L 786.497 251.998 Z',
  'M 772.497 256.998 L 759.997 260.998 L 772.487 273.998 L 785.997 269.998 L 772.497 256.998 Z',
  'M 759.997 260.998 L 746.277 265.278 L 758.767 278.278 L 772.497 273.998 L 759.997 260.998 Z',
  'M 745.077 265.498 L 729.997 269.998 L 742.997 282.998 L 757.577 278.498 L 745.077 265.498 Z',
  'M 729.907 269.998 L 716.497 273.998 L 728.997 287.498 L 742.907 282.998 L 729.907 269.998 Z',
  'M 716.497 273.998 L 702.287 278.298 L 714.997 291.498 L 728.997 287.498 L 716.497 273.998 Z',
  'M 702.477 278.308 L 688.997 282.498 L 701.487 295.998 L 714.987 291.498 L 702.477 278.308 Z',
  'M 864.987 245.498 L 851.497 249.998 L 864.987 263.498 L 878.497 258.998 L 864.987 245.498 Z',
  'M 851.527 249.998 L 838.997 253.498 L 853.497 267.498 L 864.997 263.498 L 851.527 249.998 Z',
  'M 838.787 253.278 L 826.997 257.498 L 840.547 271.548 L 853.257 267.268 L 838.787 253.278 Z',
  'M 827.027 257.498 L 814.497 260.998 L 828.897 275.538 L 840.497 271.498 L 827.027 257.498 Z',
  'M 814.287 261.278 L 799.497 265.498 L 812.007 279.998 L 827.747 275.278 L 814.287 261.278 Z',
  'M 799.487 265.498 L 785.987 269.998 L 798.997 283.998 L 811.987 279.998 L 799.487 265.498 Z',
  'M 785.957 269.998 L 772.497 273.998 L 785.467 288.498 L 798.957 283.998 L 785.957 269.998 Z',
  'M 772.497 273.998 L 758.777 278.278 L 771.747 292.778 L 785.237 288.278 L 772.497 273.998 Z',
  'M 757.477 278.498 L 742.997 282.998 L 756.497 297.498 L 770.497 292.998 L 757.477 278.498 Z',
  'M 742.997 282.998 L 728.997 287.498 L 742.507 301.998 L 756.497 297.498 L 742.997 282.998 Z',
  'M 728.997 287.498 L 714.997 291.498 L 728.667 306.058 L 742.497 301.998 L 728.997 287.498 Z',
  'M 715.027 291.498 L 701.497 295.998 L 714.007 309.868 L 728.527 305.998 L 715.027 291.498 Z',
  'M 889.977 269.998 L 876.997 274.498 L 890.997 287.498 L 904.477 283.498 L 889.977 269.998 Z',
  'M 877.027 274.498 L 864.497 277.998 L 878.027 291.498 L 891.027 287.498 L 877.027 274.498 Z',
  'M 864.507 277.998 L 851.497 281.998 L 865.997 295.498 L 878.007 291.498 L 864.507 277.998 Z',
  'M 851.477 281.998 L 839.497 285.998 L 853.477 299.498 L 865.977 295.498 L 851.477 281.998 Z',
  'M 838.247 286.138 L 823.507 290.498 L 837.497 304.498 L 851.997 299.998 L 838.247 286.138 Z',
  'M 823.497 290.498 L 809.997 294.998 L 823.997 308.998 L 837.497 304.498 L 823.497 290.498 Z',
  'M 809.987 294.998 L 796.497 299.498 L 809.997 313.498 L 823.987 308.998 L 809.987 294.998 Z',
  'M 796.497 299.498 L 782.297 303.798 L 795.797 317.798 L 809.987 313.498 L 796.497 299.498 Z',
  'M 780.997 303.998 L 766.497 308.498 L 779.997 322.998 L 795.497 317.998 L 780.997 303.998 Z',
  'M 766.477 308.498 L 752.497 312.998 L 765.497 327.498 L 779.977 322.998 L 766.477 308.498 Z',
  'M 752.517 312.998 L 738.497 316.998 L 751.507 331.998 L 765.507 327.498 L 752.517 312.998 Z',
  'M 738.497 316.998 L 724.317 321.308 L 737.497 336.498 L 751.497 331.998 L 738.497 316.998 Z',
  'M 904.477 283.498 L 890.997 287.498 L 904.977 301.498 L 918.007 297.008 L 904.477 283.498 Z',
  'M 890.997 287.498 L 877.997 291.498 L 891.967 305.998 L 904.967 301.498 L 890.997 287.498 Z',
  'M 877.997 291.498 L 865.997 295.498 L 879.497 309.998 L 891.997 305.998 L 877.997 291.498 Z',
  'M 865.987 295.498 L 853.497 299.498 L 867.277 314.288 L 879.497 309.998 L 865.987 295.498 Z',
  'M 851.997 299.998 L 837.497 304.498 L 851.997 319.498 L 866.497 314.498 L 851.997 299.998 Z',
  'M 837.487 304.498 L 823.997 308.998 L 838.497 323.498 L 851.997 319.498 L 837.487 304.498 Z',
  'M 824.007 308.998 L 809.997 313.498 L 824.497 328.498 L 838.497 323.498 L 824.007 308.998 Z',
  'M 809.977 313.498 L 795.997 317.998 L 810.497 332.998 L 824.477 328.498 L 809.977 313.498 Z',
  'M 795.497 317.998 L 779.997 322.998 L 794.497 337.998 L 810.497 332.998 L 795.497 317.998 Z',
  'M 779.997 322.998 L 765.497 327.498 L 779.497 342.998 L 794.497 337.998 L 779.997 322.998 Z',
  'M 765.507 327.498 L 751.497 331.998 L 764.997 347.498 L 779.507 342.998 L 765.507 327.498 Z',
  'M 751.517 331.998 L 737.497 336.498 L 750.787 351.998 L 765.017 347.498 L 751.517 331.998 Z',
  'M 775.497 358.498 L 761.497 362.498 L 775.497 378.498 L 789.987 373.498 L 775.497 358.498 Z',
  'M 790.497 353.498 L 775.497 358.498 L 790.007 373.498 L 804.497 368.498 L 790.497 353.498 Z',
  'M 804.497 348.998 L 790.497 353.498 L 804.497 368.498 L 818.997 363.498 L 804.497 348.998 Z',
  'M 819.997 343.998 L 804.497 348.998 L 819.007 363.498 L 833.987 358.498 L 819.997 343.998 Z',
  'M 835.057 339.498 L 820.997 343.498 L 835.057 358.498 L 849.497 353.498 L 835.057 339.498 Z',
  'M 848.997 334.998 L 834.997 339.498 L 849.507 353.498 L 863.497 348.498 L 848.997 334.998 Z',
  'M 863.477 330.498 L 848.997 334.998 L 862.997 348.498 L 876.977 343.998 L 863.477 330.498 Z',
  'M 877.747 325.318 L 863.497 330.498 L 876.977 343.998 L 891.477 338.998 L 877.747 325.318 Z',
  'M 891.497 320.998 L 879.167 325.168 L 892.917 338.478 L 904.997 334.498 L 891.497 320.998 Z',
  'M 903.997 316.998 L 891.497 320.998 L 904.997 334.498 L 917.997 329.998 L 903.997 316.998 Z',
  'M 917.497 312.998 L 903.997 316.998 L 917.977 329.998 L 930.997 325.998 L 917.497 312.998 Z',
  'M 930.497 308.498 L 917.497 312.998 L 930.997 325.998 L 943.997 321.498 L 930.497 308.498 Z',
  'M 904.997 334.498 L 892.997 338.498 L 908.997 354.498 L 921.387 350.448 L 904.997 334.498 Z',
  'M 917.997 329.998 L 904.997 334.498 L 921.387 350.268 L 934.387 345.948 L 917.997 329.998 Z',
  'M 930.997 325.998 L 917.997 329.998 L 934.497 345.998 L 946.997 341.998 L 930.997 325.998 Z',
  'M 943.957 321.498 L 930.997 325.998 L 946.957 341.998 L 960.457 336.998 L 943.957 321.498 Z',
  'M 789.997 373.498 L 775.497 378.498 L 789.497 393.999 L 803.997 389.498 L 789.997 373.498 Z',
  'M 804.497 368.498 L 789.997 373.498 L 803.997 389.498 L 818.997 384.498 L 804.497 368.498 Z',
  'M 818.997 363.498 L 804.497 368.498 L 818.997 384.498 L 832.997 379.498 L 818.997 363.498 Z',
  'M 833.997 358.498 L 818.997 363.498 L 832.997 379.498 L 848.017 374.318 L 833.997 358.498 Z',
  'M 849.497 353.498 L 834.997 358.498 L 849.997 373.998 L 864.997 369.498 L 849.497 353.498 Z',
  'M 862.997 348.498 L 849.497 353.498 L 864.997 369.498 L 879.347 363.808 L 862.997 348.498 Z',
  'M 876.977 343.998 L 862.997 348.498 L 878.987 363.998 L 892.977 359.498 L 876.977 343.998 Z',
  'M 891.477 338.998 L 876.997 343.998 L 892.977 359.498 L 907.297 354.808 L 891.477 338.998 Z',
  'M 1074 260.498 L 1059.5 264.998 L 1076.02 279.998 L 1091 274.498 L 1074 260.498 Z',
  'M 1059.49 264.998 L 1046 268.998 L 1063.02 283.998 L 1076.01 279.998 L 1059.49 264.998 Z',
  'M 1046 268.998 L 1033.5 273.498 L 1050 287.998 L 1063 283.998 L 1046 268.998 Z',
  'M 1033.5 273.498 L 1020 277.998 L 1036.98 292.498 L 1049.98 287.998 L 1033.5 273.498 Z',
  'M 1020 277.998 L 1006.5 282.998 L 1022 297.498 L 1037 292.498 L 1020 277.998 Z',
  'M 1006.48 282.998 L 993 287.498 L 1008.5 301.498 L 1021.98 297.498 L 1006.48 282.998 Z',
  'M 992.99 287.498 L 979.997 291.998 L 995.5 305.998 L 1008.49 301.498 L 992.99 287.498 Z',
  'M 979.997 291.998 L 967.997 296.498 L 982.497 310.498 L 995.5 305.998 L 979.997 291.998 Z',
  'M 1091 274.498 L 1076 279.998 L 1092.32 293.838 L 1106.32 288.338 L 1091 274.498 Z',
  'M 1076 279.998 L 1063 283.998 L 1079 297.998 L 1092.5 293.998 L 1076 279.998 Z',
  'M 1062.98 283.998 L 1050 287.998 L 1066.28 302.288 L 1078.99 297.998 L 1062.98 283.998 Z',
  'M 1049.99 287.998 L 1037 292.498 L 1052.5 306.998 L 1066.29 302.288 L 1049.99 287.998 Z',
  'M 1036.97 292.498 L 1022 297.498 L 1038.47 311.998 L 1052.5 306.998 L 1036.97 292.498 Z',
  'M 1021.96 297.498 L 1008.5 301.498 L 1025.48 316.498 L 1038.46 311.998 L 1021.96 297.498 Z',
  'M 1008.48 301.498 L 995.5 305.998 L 1012 320.998 L 1025.8 316.298 L 1008.48 301.498 Z',
  'M 995.49 305.998 L 982.497 310.498 L 998 325.998 L 1011.99 320.998 L 995.49 305.998 Z',
  'M 1030.99 225.998 L 1018.5 229.998 L 1032.48 242.498 L 1045.48 237.998 L 1030.99 225.998 Z',
  'M 1018.49 229.998 L 1005.5 234.498 L 1018.99 246.998 L 1032.5 242.498 L 1018.49 229.998 Z',
  'M 1005.42 234.498 L 992.5 237.998 L 1006 250.498 L 1018.92 246.998 L 1005.42 234.498 Z',
  'M 992.5 237.998 L 980.297 241.898 L 994.3 254.398 L 1006 250.498 L 992.5 237.998 Z',
  'M 978.747 242.278 L 964.987 246.498 L 979.477 259.498 L 993.48 254.998 L 978.747 242.278 Z',
  'M 964.967 246.498 L 951.997 250.498 L 966.977 263.498 L 979.467 259.498 L 964.967 246.498 Z',
  'M 951.987 250.498 L 937.997 253.998 L 952.997 267.498 L 966.987 263.498 L 951.987 250.498 Z',
  'M 938.037 253.998 L 924.997 257.998 L 940.497 271.998 L 953.037 267.498 L 938.037 253.998 Z',
  'M 1045.9 238.318 L 1032.5 242.498 L 1046.82 255.898 L 1060.5 250.998 L 1045.9 238.318 Z',
  'M 1032.5 242.498 L 1019 246.998 L 1034 260.498 L 1047 255.998 L 1032.5 242.498 Z',
  'M 1019 246.998 L 1006 250.498 L 1021.49 264.498 L 1034 260.498 L 1019 246.998 Z',
  'M 1005.99 250.498 L 994.29 254.398 L 1008.8 268.398 L 1021.49 264.498 L 1005.99 250.498 Z',
  'M 993.48 254.998 L 979.497 259.498 L 994.48 272.998 L 1007.98 268.498 L 993.48 254.998 Z',
  'M 979.537 259.498 L 966.997 263.498 L 981.497 276.998 L 994.5 272.998 L 979.537 259.498 Z',
  'M 967.007 263.498 L 952.997 267.498 L 967.507 281.498 L 981.517 276.998 L 967.007 263.498 Z',
  'M 952.997 267.498 L 940.497 271.998 L 954.997 285.498 L 967.497 281.498 L 952.997 267.498 Z',
  'M 989.997 190.998 L 976.997 194.998 L 990.497 207.498 L 1003.97 202.998 L 989.997 190.998 Z',
  'M 976.987 194.998 L 963.987 198.998 L 977.497 211.498 L 990.497 207.498 L 976.987 194.998 Z',
  'M 964.267 199.288 L 951.267 203.288 L 964.997 214.998 L 977.497 211.498 L 964.267 199.288 Z',
  'M 951.227 203.288 L 939.267 206.788 L 953.497 218.498 L 964.977 214.998 L 951.227 203.288 Z',
  'M 938.507 206.998 L 925.497 210.998 L 939.007 222.998 L 952.507 218.998 L 938.507 206.998 Z',
  'M 925.497 210.998 L 912.257 215.058 L 925.497 226.998 L 938.997 222.998 L 925.497 210.998 Z',
  'M 912.517 215.288 L 899.497 218.998 L 913.027 230.998 L 925.527 226.998 L 912.517 215.288 Z',
  'M 899.477 218.998 L 886.997 222.998 L 900.727 234.998 L 912.977 230.998 L 899.477 218.998 Z',
  'M 1004.02 202.998 L 990.497 207.498 L 1005 219.498 L 1018 215.498 L 1004.02 202.998 Z',
  'M 990.417 207.498 L 977.497 211.498 L 991.5 223.498 L 1005 219.498 L 990.417 207.498 Z',
  'M 977.497 211.498 L 964.997 214.998 L 979.017 227.498 L 991.49 223.498 L 977.497 211.498 Z',
  'M 965.007 214.998 L 953.497 218.498 L 967.497 231.498 L 979.007 227.498 L 965.007 214.998 Z',
  'M 952.477 218.998 L 938.987 222.998 L 952.997 235.998 L 966.477 231.498 L 952.477 218.998 Z',
  'M 938.927 222.998 L 925.497 226.998 L 938.937 240.498 L 952.937 235.998 L 938.927 222.998 Z',
  'M 925.467 226.998 L 912.997 230.998 L 926.467 244.498 L 938.947 240.498 L 925.467 226.998 Z',
  'M 912.997 230.998 L 900.747 234.998 L 914.217 248.498 L 926.697 244.498 L 912.997 230.998 Z',
  'M 491.558 449.499 L 475.425 455.094 L 487.647 472.389 L 504.269 466.794 L 491.558 449.499 Z',
  'M 504.269 466.794 L 487.647 472.389 L 499.869 490.193 L 516.491 484.597 L 504.269 466.794 Z',
  'M 475.421 455.093 L 459.776 460.128 L 471.998 477.474 L 487.643 472.388 L 475.421 455.093 Z',
  'M 487.647 472.388 L 472.003 477.474 L 484.225 495.278 L 499.869 490.191 L 487.647 472.388 Z',
  'M 459.991 402.999 L 443.991 407.999 L 456.491 425.999 L 472.491 420.999 L 459.991 402.999 Z',
  'M 472.627 421.112 L 456.491 425.999 L 467.212 441.499 L 483.348 436.238 L 472.627 421.112 Z',
  'M 443.991 407.999 L 428.991 412.499 L 441.491 430.999 L 456.491 425.999 L 443.991 407.999 Z',
  'M 428.991 412.499 L 413.991 416.999 L 425.991 435.999 L 441.491 430.999 L 428.991 412.499 Z',
  'M 413.991 416.999 L 398.991 421.999 L 410.491 440.499 L 425.991 435.999 L 413.991 416.999 Z',
  'M 397.991 422.499 L 380.491 427.999 L 392.491 446.499 L 409.491 440.999 L 397.991 422.499 Z',
  'M 380.491 427.999 L 363.991 432.999 L 374.991 451.499 L 392.491 446.499 L 380.491 427.999 Z',
  'M 363.991 432.999 L 347.491 438.499 L 358.491 456.999 L 374.991 451.499 L 363.991 432.999 Z',
  'M 347.491 438.499 L 330.491 443.999 L 341.491 462.499 L 358.491 456.999 L 347.491 438.499 Z',
  'M 329.491 444.499 L 311.491 449.499 L 321.991 467.999 L 340.491 462.499 L 329.491 444.499 Z',
  'M 311.49 449.499 L 294.491 454.999 L 304.991 473.499 L 321.99 467.999 L 311.49 449.499 Z',
  'M 294.491 455.499 L 277.491 460.999 L 287.491 478.999 L 304.991 473.499 L 294.491 455.499 Z',
  'M 277.491 460.999 L 259.991 465.999 L 268.991 484.499 L 287.491 478.999 L 277.491 460.999 Z',
  'M 456.491 425.999 L 441.491 430.999 L 451.491 446.499 L 467.348 441.61 L 456.491 425.999 Z',
  'M 441.491 430.999 L 425.991 435.999 L 435.491 450.999 L 451.491 446.499 L 441.491 430.999 Z',
  'M 425.991 435.999 L 410.491 440.499 L 420.129 456.499 L 435.491 450.999 L 425.991 435.999 Z',
  'M 409.491 440.999 L 392.491 446.499 L 401.491 461.999 L 419.491 456.499 L 409.491 440.999 Z',
  'M 392.491 446.499 L 374.991 451.499 L 384.491 467.499 L 401.491 461.999 L 392.491 446.499 Z',
  'M 374.991 451.499 L 358.491 456.999 L 368.491 472.999 L 384.491 467.499 L 374.991 451.499 Z',
  'M 358.491 456.999 L 341.491 462.499 L 351.491 478.499 L 368.491 472.999 L 358.491 456.999 Z',
  'M 340.491 462.499 L 321.991 467.999 L 331.991 484.999 L 350.491 478.999 L 340.491 462.499 Z',
  'M 321.991 467.999 L 304.991 473.499 L 314.991 490.499 L 331.991 484.999 L 321.991 467.999 Z',
  'M 304.991 473.499 L 287.491 478.999 L 296.991 495.999 L 314.991 490.499 L 304.991 473.499 Z',
  'M 287.491 478.999 L 268.991 484.499 L 278.991 501.999 L 296.991 495.999 L 287.491 478.999 Z',
  'M 459.778 460.185 L 443.643 465.271 L 456.354 482.566 L 472 477.479 L 459.778 460.185 Z',
  'M 472.002 477.476 L 456.358 482.562 L 469.069 500.366 L 484.225 495.279 L 472.002 477.476 Z',
  'M 443.646 465.269 L 428.491 470.014 L 439.991 487.499 L 456.357 482.563 L 443.646 465.269 Z',
  'M 456.356 482.56 L 439.991 487.499 L 452.934 505.499 L 469.067 500.363 L 456.356 482.56 Z',
  'M 427.228 470.375 L 409.991 475.5 L 420.991 493.5 L 438.728 487.875 L 427.228 470.375 Z',
  'M 438.725 487.899 L 420.991 493.499 L 432.491 512.499 L 450.225 506.399 L 438.725 487.899 Z',
  'M 409.991 475.499 L 392.491 480.999 L 403.991 498.999 L 420.991 493.499 L 409.991 475.499 Z',
  'M 421.04 493.524 L 403.991 499 L 415.491 518 L 432.491 512.5 L 421.04 493.524 Z',
  'M 392.491 480.999 L 374.991 486.499 L 386.491 504.999 L 403.992 498.999 L 392.491 480.999 Z',
  'M 403.991 498.999 L 386.491 504.999 L 397.491 523.499 L 415.491 517.999 L 403.991 498.999 Z',
  'M 374.991 486.499 L 357.991 491.999 L 368.991 510.499 L 386.491 504.999 L 374.991 486.499 Z',
  'M 386.49 504.999 L 369.241 510.646 L 379.991 529.999 L 397.491 523.499 L 386.49 504.999 Z',
  'M 356.73 492.499 L 339.417 498.499 L 350.299 516.999 L 368.107 510.999 L 356.73 492.499 Z',
  'M 368.106 510.999 L 350.3 516.999 L 360.687 535.999 L 378.99 529.499 L 368.106 510.999 Z',
  'M 339.417 498.499 L 322.104 503.999 L 332.492 522.499 L 350.3 516.999 L 339.417 498.499 Z',
  'M 322.105 503.999 L 304.792 509.999 L 314.685 528.499 L 332.492 522.499 L 322.105 503.999 Z',
  'M 304.793 509.499 L 286.491 515.499 L 296.384 534.499 L 314.686 528.499 L 304.793 509.499 Z',
  'M 350.299 516.999 L 332.491 522.499 L 342.879 541.999 L 360.686 535.999 L 350.299 516.999 Z',
  'M 332.494 522.499 L 314.686 528.499 L 325.074 548.323 L 342.882 541.999 L 332.494 522.499 Z',
  'M 314.684 528.499 L 296.382 534.499 L 306.769 554.323 L 325.072 547.999 L 314.684 528.499 Z'
];

const props = defineProps({
  overscale: { type: Number, default: 1.1 },
  breakpoint: { type: Number, default: 1280 }
});
// const emit = defineEmits(['select-path', 'hover-path', 'leave-path']);

/* refs */
const root = ref(null);
const wrapper = ref(null);
const layer = ref(null);

/* constants */
const ASPECT_W = 1440;
const ASPECT_H = 812;

/* reactive state */
const state = reactive({
  vw: 0,
  vh: 0,
  scale: 1,
  scaledWidth: ASPECT_W,
  scaledHeight: ASPECT_H,
  overflowX: 0,
  overflowY: 0,
  desktop: false
});

/* exposed for template binding */
const layerStyle = ref({ width: `${ASPECT_W}px`, height: `${ASPECT_H}px` });

/* helpers */
// const emitSelect = path => emit('select-path', path);
// const emitHover = path => emit('hover-path', path);
// const emitLeave = () => emit('leave-path', null);

const applyScrollMode = () => {
  if (state.desktop) {
    // desktop: lock page scroll, let overlay manage visual
    document.documentElement.style.overflow = 'hidden';
    document.body.style.overflow = 'hidden';
    if (root.value) {
      root.value.style.overflow = 'hidden';
      root.value.style.touchAction = 'none';
    }
  } else {
    // mobile/tablet: allow overlay to scroll internally
    document.documentElement.style.overflow = '';
    document.body.style.overflow = '';
    if (root.value) {
      root.value.style.overflow = '';
      root.value.style.touchAction = '';
    }
  }
};

/* recalc sizes and mode */
const recalc = () => {
  state.vw = window.innerWidth;
  state.vh = window.innerHeight;
  state.desktop = state.vw >= props.breakpoint;

  // scale to cover and then overscale so both axes overflow
  const scaleX = state.vw / ASPECT_W;
  const scaleY = state.vh / ASPECT_H;
  const baseScale = Math.max(scaleX, scaleY);
  state.scale = baseScale * props.overscale;

  state.scaledWidth = Math.round(ASPECT_W * state.scale);
  state.scaledHeight = Math.round(ASPECT_H * state.scale);

  state.overflowX = Math.max(0, state.scaledWidth - state.vw);
  state.overflowY = Math.max(0, state.scaledHeight - state.vh);

  // set layer style depending on mode
  if (state.desktop) {
    layerStyle.value = {
      position: 'absolute',
      left: '50%',
      top: '50%',
      transform: 'translate(-50%, -50%)',
      width: `${state.scaledWidth}px`,
      height: `${state.scaledHeight}px`
    };
    // reset transform
    if (layer.value) {
      gsap.killTweensOf(layer.value);
      gsap.set(layer.value, { x: 0, y: 0 });
    }
  } else {
    // mobile/tablet: flow content normally inside scrollable wrapper.
    // use margin: 0 auto to center horizontally and allow scroll on both sides.
    layerStyle.value = {
      position: 'relative',
      left: 'auto',
      top: 'auto',
      transform: 'none',
      margin: '0 auto',
      width: `${state.scaledWidth}px`,
      height: `${state.scaledHeight}px`
    };
    // reset any leftover transforms
    if (layer.value) {
      gsap.killTweensOf(layer.value);
      gsap.set(layer.value, { x: 0, y: 0 });
    }
  }

  applyScrollMode();

  // when switching to mobile, center the initial scroll so user can pan both directions
  if (!state.desktop && wrapper.value) {
    // allow layout to update first
    nextTick(() => {
      // give the browser one frame to layout
      requestAnimationFrame(() => {
        try {
          wrapper.value.scrollLeft = Math.round(state.overflowX / 2);
          wrapper.value.scrollTop = Math.round(state.overflowY / 2);
        } catch (err) {
          // ignore if not scrollable yet
          console.log(err);
        }
      });
    });
  }
};

/* parallax handlers (arrow functions) */
const handleParallax = e => {
  if (!state.desktop || !layer.value) return;

  const nx = (e.clientX / state.vw - 0.5) * 2; // -1..1
  const ny = (e.clientY / state.vh - 0.5) * 2; // -1..1

  // move opposite to pointer up to half of overflow
  const targetX = -nx * (state.overflowX / 2);
  const targetY = -ny * (state.overflowY / 2);

  gsap.to(layer.value, {
    x: Math.round(targetX),
    y: Math.round(targetY),
    duration: 0.9,
    ease: 'power3.out',
    overwrite: true
  });
};

const resetParallax = () => {
  if (!layer.value) return;
  gsap.to(layer.value, {
    x: 0,
    y: 0,
    duration: 0.8,
    ease: 'power3.out'
  });
};

/* resize debounce */
let resizeTimer = null;
const onResize = () => {
  clearTimeout(resizeTimer);
  resizeTimer = setTimeout(recalc, 120);
};

/* lifecycle */
onMounted(() => {
  recalc();
  window.addEventListener('resize', onResize, { passive: true });
  window.addEventListener('orientationchange', recalc, { passive: true });

  // global pointermove toggles parallax only on desktop
  window.addEventListener('pointermove', handleParallax);
  window.addEventListener('pointerleave', resetParallax);
  window.addEventListener('blur', resetParallax);
});

onUnmounted(() => {
  window.removeEventListener('resize', onResize);
  window.removeEventListener('orientationchange', recalc);
  window.removeEventListener('pointermove', handleParallax);
  window.removeEventListener('pointerleave', resetParallax);
  window.removeEventListener('blur', resetParallax);
  clearTimeout(resizeTimer);

  // restore page
  document.documentElement.style.overflow = '';
  document.body.style.overflow = '';
  if (root.value) {
    root.value.style.overflow = '';
    root.value.style.touchAction = '';
  }
});
</script>

<style lang="scss" scoped>
.overlay {
  user-select: none;
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden; // toggled by JS
  z-index: 0;
  &:not(.overlay--buildings) .overlay__container-path:hover {
    fill: #ffff0080;
  }
  @media screen and (min-width: 1280px) {
    &.overlay--buildings .overlay__container-path:hover {
      fill: #ffff0080;
    }
  }
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 20%;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, #000000 100%);
    opacity: 0.8;
    z-index: 10;
    pointer-events: none;
    @media screen and (min-width: 1280px) {
      display: none;
    }
  }
  &__close {
    position: absolute !important;
    right: var(--block-spacing);
    top: calc(var(--header-height) + max(3.2rem, 20px));
    z-index: 60;
  }

  &__wrapper {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    -webkit-overflow-scrolling: touch;

    // mobile/tablet: let the wrapper scroll and keep layer flowable inside
    @media screen and (max-width: 1279px) {
      position: absolute; /* still fills viewport */
      overflow: auto;
      display: block;
      -webkit-overflow-scrolling: touch;
      touch-action: auto;
      scrollbar-width: 0;
      &::-webkit-scrollbar {
        display: none;
      }
    }
  }

  /* layer will receive transform from GSAP on desktop.
     On mobile it becomes a block with margin:auto so wrapper.scrollLeft can center it.
  */
  &__layer {
    position: absolute; /* overwritten inline in mobile mode */
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    will-change: transform;
    pointer-events: auto;
    z-index: 10;

    @media screen and (max-width: 1279px) {
      position: relative;
      left: auto;
      top: auto;
      transform: none;
      margin: 0 auto;
    }
  }

  &__picture,
  &__container {
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    display: block;
  }

  /* image must not capture pointer events so SVG remains interactive */
  &__picture {
    object-fit: cover;
    pointer-events: none;
    user-select: none;
  }

  &__container {
    z-index: 20;
    pointer-events: auto;

    &-path {
      cursor: pointer;
      transition: fill 160ms ease;
      fill: transparent;
      pointer-events: auto;
      &.active {
        fill: #ffff0080;
      }
    }
  }
}
</style>
